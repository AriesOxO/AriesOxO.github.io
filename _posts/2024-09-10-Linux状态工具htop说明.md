---
author: meow
comments: true
title: Linux系统状态命令htop详细解释说明
categories:
- 服务器
tags:
- Linux
- htop
---

### htop 介绍

`htop` 是一个交互式的系统监控工具，提供比 `top` 更友好的界面和丰富的信息，帮助用户高效监控和管理系统状态。它可以显示系统的 CPU、内存、交换分区的使用情况，以及所有进程的详细信息。

### 安装 htop

在大多数 Linux 发行版上，你可以使用包管理器来安装 `htop`。

- **Debian/Ubuntu**:
  ```bash
  sudo apt-get update
  sudo apt-get install htop
  ```

- **CentOS/RHEL**:
  ```bash
  sudo yum install epel-release
  sudo yum install htop
  ```

- **Fedora**:
  ```bash
  sudo dnf install htop
  ```

- **Arch Linux**:
  ```bash
  sudo pacman -S htop
  ```

### 启动 htop

安装完成后，通过在终端中输入 `htop` 启动该工具：
```bash
htop
```

### htop 界面解析

启动 `htop` 后，你会看到一个彩色的界面，显示了系统的各种实时信息。以下是界面的解析：

#### 顶部区域

- **CPU 使用率**: 每个 CPU 核心的使用情况，以彩色条显示。
  - 绿色表示用户进程使用的 CPU 时间。
  - 蓝色表示低优先级进程使用的 CPU 时间。
  - 红色表示系统进程（内核）使用的 CPU 时间。
  - 橙色表示 IRQ 时间。
  - 灰色表示空闲时间。
- **内存使用率**: 以彩色条显示当前内存的使用情况。
  - 绿色表示已用内存。
  - 蓝色表示缓冲区（buffers）。
  - 黄色表示缓存（cache）。
- **交换分区使用率**: 以彩色条显示当前交换分区的使用情况。
  - 红色表示已用交换分区。
  - 蓝色表示缓冲区（buffers）。
  - 黄色表示缓存（cache）。

#### 中间区域

- **任务摘要**: 显示当前系统的任务总数、运行中的任务、休眠任务、停止任务和僵尸任务的数量。
- **负载平均值**: 显示系统的 1 分钟、5 分钟和 15 分钟的负载平均值。
- **内核版本**: 显示当前运行的内核版本。
- **运行时间**: 显示系统的总运行时间。

#### 进程列表

- **PID**: 进程 ID。
- **USER**: 进程所属用户。
- **PRI**: 进程优先级。
- **NI**: 进程的 nice 值。
- **VIRT**: 进程使用的虚拟内存总量。
- **RES**: 进程使用的常驻内存总量。
- **SHR**: 进程使用的共享内存总量。
- **S**: 进程状态。
  - `R` 表示运行中。
  - `S` 表示休眠中。
  - `D` 表示不可中断的睡眠状态。
  - `Z` 表示僵尸进程。
  - `T` 表示停止或追踪状态。
- **%CPU**: 进程使用的 CPU 百分比。
- **%MEM**: 进程使用的内存百分比。
- **TIME+**: 进程使用的 CPU 时间总量。
- **COMMAND**: 启动进程的命令。

#### 底部区域

- **快捷键提示**: 显示一些常用的快捷键和功能。

### 常用快捷键

`htop` 提供了丰富的快捷键来方便用户进行各种操作：

- **F1**: 帮助。
- **F2**: 设置。
- **F3**: 搜索进程。
- **F4**: 过滤进程。
- **F5**: 树状视图。
- **F6**: 排序方式。
- **F7**: 增加进程的 nice 值（降低优先级）。
- **F8**: 减少进程的 nice 值（提高优先级）。
- **F9**: 杀死进程。
- **F10**: 退出 `htop`。
- **上下箭头**: 移动选择的进程。
- **左右箭头**: 切换排序列。

### 高级功能

1. **树状视图**
  - 按 `F5` 可以切换到树状视图模式，这样可以看到进程的父子关系。

2. **自定义列**
  - 按 `F2` 进入设置菜单，然后选择 “Columns” 可以自定义进程列表中显示的列。

3. **过滤进程**
  - 按 `F4` 可以输入关键字来过滤进程，只显示包含该关键字的进程。

4. **搜索进程**
  - 按 `F3` 可以输入关键字来搜索进程，光标会跳转到匹配的进程上。

5. **排序进程**
  - 按 `F6` 可以选择不同的排序方式，例如按 CPU 使用率、内存使用率、进程 ID 等排序。

6. **监控远程系统**
  - 可以通过 SSH 登录到远程系统，然后运行 `htop` 来监控远程系统的状态。

### 配置文件

`htop` 的配置文件位于用户的主目录下，文件名为 `.config/htop/htoprc`。你可以手动编辑这个文件来修改 `htop` 的默认设置。

### 常用组合命令

- **基本启动**:
  ```bash
  htop
  ```

- **显示树状视图**:
  ```bash
  htop -t
  ```

- **按用户过滤进程**:
  ```bash
  htop -u username
  ```

- **按 PID 过滤进程**:
  ```bash
  htop -p PID1,PID2
  ```

- **通过 SSH 监控远程系统**:
  ```bash
  ssh user@remote_host htop
  ```

- **保存 htop 输出到文件**:
  ```bash
  htop -C > htop_output.txt
  ```

- **以 root 权限运行 htop**:
  ```bash
  sudo htop
  ```

- **显示帮助信息**:
  ```bash
  htop -h
  ```

- **指定配置文件**:
  ```bash
  htop -C /path/to/configfile
  ```

- **禁用彩色输出**:
  ```bash
  htop -C
  ```

### 总结

`htop` 是一个非常强大且灵活的系统监控工具，它提供了比传统的 `top` 命令更丰富的信息和更友好的用户界面。通过熟练掌握 `htop` 的各种功能和快捷键，可以更加高效地监控和管理你的 Linux 系统。
