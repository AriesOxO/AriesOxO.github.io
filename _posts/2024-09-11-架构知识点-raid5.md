---
author: meow
comments: true
title: 架构知识点-raid5阵列
categories:
- 软考
tags:
- raid5
---

## 一、RAID 5 介绍

### 定义

RAID 5（独立磁盘冗余阵列 5，Redundant Array of Independent Disks 5）是一种通过分布式奇偶校验来实现数据冗余和故障恢复的存储技术。它将数据和奇偶校验信息分布在所有磁盘上，当其中一块磁盘发生故障时，可以通过奇偶校验信息重建丢失的数据。

### 特点

1. **数据分布**：数据和奇偶校验信息分布在所有磁盘上。
2. **冗余性**：允许单个磁盘故障而不丢失数据。
3. **读写性能**：读取性能较好，写入性能因奇偶校验计算略有下降。
4. **存储效率**：相对于 RAID 1 等镜像方案，RAID 5 的存储效率更高。

## 二、RAID 5 容量计算

RAID 5 的总容量计算公式为：

```
总容量 = （磁盘数量 - 1）× 单个磁盘容量
```

### 示例

假设有 4 块 1 TB 的硬盘组成 RAID 5 阵列，则总容量为：

```
总容量 = （4 - 1）× 1 TB = 3 TB
```

在 RAID 5 阵列中，磁盘容量不一致的情况确实需要特别考虑。RAID 5 阵列中的总容量受限于最小容量的磁盘，因为奇偶校验信息和数据块必须均匀分布在所有磁盘上。

## 三、RAID 5 容量计算（磁盘容量不一致）

当磁盘容量不一致时，RAID 5 的总容量计算公式为：

```
总容量 = （磁盘数量 - 1）× 最小磁盘容量

```

### 示例

假设有 4 块硬盘组成 RAID 5 阵列，其中硬盘容量分别为 1 TB、2 TB、2 TB 和 3 TB，则总容量为：

```
总容量 = （4 - 1）× 1 TB = 3 TB
```

在这个例子中，尽管有些硬盘的容量大于 1 TB，但由于 RAID 5 的限制，只有最小容量的部分会被使用，其他部分将被浪费。

### 注意事项

1. **容量浪费**：使用不同容量的硬盘会导致较大容量硬盘的部分空间未被使用，造成浪费。
2. **性能影响**：性能可能会受到影响，因为所有磁盘的读写速度将受到最小容量磁盘的限制。
3. **一致性**：为了最佳性能和容量利用，建议在 RAID 5 阵列中使用相同容量和规格的硬盘。

## 四、RAID 5 注意事项

### 1. 磁盘数量

RAID 5 至少需要 3 块硬盘才能实现数据和奇偶校验信息的分布。

### 2. 故障恢复

RAID 5 允许单个磁盘故障，但在故障磁盘更换和数据重建期间，系统处于降级状态，性能可能会下降。如果在重建过程中再发生磁盘故障，可能会导致数据丢失。

### 3. 性能影响

RAID 5 的读取性能较好，但写入性能会受到奇偶校验计算的影响，写入速度可能会比单个磁盘稍慢。

### 4. 数据保护

虽然 RAID 5 提供了一定程度的数据冗余，但仍需定期备份数据，以防止多块磁盘同时故障或其他不可预见的灾难。

### 5. 硬盘一致性

建议使用相同型号和容量的硬盘，以确保性能和容量的一致性。如果使用不同型号或容量的硬盘，可能会影响 RAID 5 的性能和可用容量。

### 6. 控制器支持

确保 RAID 控制器支持 RAID 5 并且性能足够强大，以处理奇偶校验计算和数据重建任务。

### 7. 热备盘

考虑配置一个或多个热备盘（Hot Spare），当某块磁盘故障时，热备盘可以自动替换故障磁盘并开始重建数据，减少数据丢失的风险。

## 五、总结

RAID 5 是一种平衡了存储效率、性能和数据冗余的存储方案，适用于需要高可用性和较大容量的场景。然而，RAID 5 并不是万能的，仍需结合实际需求和环境进行选择，并做好数据备份和监控工作，以确保数据的安全性和系统的稳定性。
